<?xml version="1.0" encoding="utf-8"?>

<!-- Copyright (C) 2011 Stephen Leake stephen_leake@stephe-leake.org

This application is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License as
published by the Free Software Foundation; either version 3, or (at
your option) any later version.

This application is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
General Public License for more details.

You should have received a copy of the GNU General Public License
along with GCC; see the file COPYING3.  If not see
<http://www.gnu.org/licenses/>.

-->

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="org.stephe_leake.android.stephes_music"
          android:versionCode="3"
          android:versionName="3.0">
  <!-- this is actually the Android API level, not the SDK level (sigh) -->
  <uses-sdk android:minSdkVersion="16"
            android:targetSdkVersion="16"/>

  <uses-permission android:name="android.permission.BROADCAST_STICKY" /> <!-- send data from service to activity -->
  <uses-permission android:name="android.permission.WAKE_LOCK" /> <!-- media player prevents screen from turning off -->
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> <!-- store last played song -->
  <uses-permission android:name="android.permission.WRITE_SETTINGS" /> <!-- preferences -->

  <application
      android:icon="@drawable/icon"
      android:label="@string/app_name"
      android:allowBackup="false"
  >

    <!--
        We use "singleTask" because there is only one server, and
        only one song playing at a time. An alternative would be to
        use "standard" and exit each instance in onPause. But that
        would be a race condition with waiting for the service
        connection.
    -->
    <activity
        android:name=".activity"
        android:label="@string/app_name"
        android:launchMode="singleTask">
      <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
      <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />

        <!-- The current version only supports m3u playlists. -->
        <data android:mimeType="audio/x-mpegurl" android:scheme="file" />
      </intent-filter>
    </activity>

    <service
        android:name="org.stephe_leake.android.stephes_music.service"
        android:exported="false" />

    <activity
        android:name=".preferences"
        android:label="@string/preferences_activity_name">
    </activity>

  </application>
</manifest>
