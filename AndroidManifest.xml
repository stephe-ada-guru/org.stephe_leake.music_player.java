<?xml version="1.0" encoding="utf-8"?>

<!-- Copyright (C) 2011 Stephen Leake stephen_leake@stephe-leake.org

This application is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License as
published by the Free Software Foundation; either version 3, or (at
your option) any later version.

This application is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
General Public License for more details.

You should have received a copy of the GNU General Public License
along with GCC; see the file COPYING3.  If not see
<http://www.gnu.org/licenses/>.

-->

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="org.stephe_leake.android.stephes_music"
          android:versionCode="2"
          android:versionName="2.0">
  <uses-sdk android:minSdkVersion="10" />

  <uses-permission android:name="android.permission.WRITE_SETTINGS" /> <!-- preferences -->
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> <!-- store last played song -->
  <uses-permission android:name="android.permission.BROADCAST_STICKY" /> <!-- send data from service to activity -->

  <application 
      android:icon="@drawable/icon" 
      android:label="@string/app_name">

    <!-- We use "singleTask" because there is only one server, and
         only one song playing at a time. An alternative would be to
         use "standard" and exit each instance in onPause. But that
         would be a race condition with waiting for the service
         connection. -->
    <activity android:name=".activity"
              android:label="@string/app_name"
              android:launchMode="singleTask">
      <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
      <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        
        <!-- The current version only supports m3u playlists. -->
        <data android:mimeType="audio/x-mpegurl" android:scheme="file" />
      </intent-filter>
    </activity>

    <service android:name="org.stephe_leake.android.stephes_music.service"
             android:exported="false" />

  </application>
</manifest>
